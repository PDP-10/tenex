; Copyright Xerox Corporation 1979

.TITLE EFTP  

.CSECT GLOBAL
G=.

.CSECT

; ENTRY POINT TO INITEFTPPACKAGE
LA1:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	CLR -4.(0)
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO OPENEFTPSOC
LA2:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
	MOV #000023,%2
	MOV -2.(0),%1
	JSR %7,@G+202.
	000010
	MOV -2.(0),%1
	ASL %1
	MOV #177777,32.(1)
	MOV -2.(0),%1
	ASL %1
	MOV #000012,34.(1)
	MOV -6.(0),%3
	MOV -4.(0),%2
	MOV -2.(0),%1
	JSR %7,@G+300.
	000010
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO CLOSEEFTPSOC
LA3:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV -2.(0),%1
	ASL %1
	TST 28.(1)
	BEQ LA17
	MOV -2.(0),%1
	ASL %1
	MOV 28.(1),%1
	JSR %7,@G+306.
	000004
LA17:
	MOV -2.(0),%1
	JSR %7,@G+302.
	000004
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO SENDEFTPBLOCK
LA4:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
	MOV %4,-(5)
	MOV #000030,-22.(0)
	MOV -8.(0),%4
	MOV -6.(0),%3
	MOV -4.(0),%2
	MOV -2.(0),%1
	JSR %7,@LA7
	000012
	MOV %1,-10.(0)
	TST -10.(0)
	BLT LA19
	MOV -2.(0),%1
	ASL %1
	MOV 26.(1),%1
	INC %1
	MOV -2.(0),%2
	ASL %2
	MOV %1,26.(2)
LA19:
	MOV -10.(0),%1
	BR LA18
LA16:
	JMP MA16
LA18:
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO SENDEFTPEND
LA5:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV #000032,-18.(0)
	MOV -4.(0),%4
	CLR %3
	CLR %2
	MOV -2.(0),%1
	JSR %7,@LA7
	000006
	TST %1
	BLT LA21
	CLR -6.(0)
	MOV -2.(0),%1
	ASL %1
	MOV 26.(1),%1
	INC %1
	MOV -2.(0),%2
	ASL %2
	MOV %1,26.(2)
	CLR %2
	MOV -2.(0),%1
	JSR %7,@G+304.
	000010
	MOV %1,-6.(0)
	MOV -2.(0),%1
	ASL %1
	MOV -6.(0),%2
	ASL %2
	MOV 26.(1),24.(2)
	MOV #000026,%3
	MOV #000032,%2
	MOV -6.(0),%1
	JSR %7,@G+314.
	000010
	MOV #177777,%1
	BR LA20
LA21:
	CLR %1
	BR LA20
LA20:
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO SENDEFTPPACKET
LA6:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
	MOV %4,-(5)
	CLR -12.(0)
	MOV -2.(0),%1
	ADD #000022,%1
	CLR %2
	JSR %7,@G+244.
	000016
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000006,%1
	MOV -8.(0),%2
	JSR %7,@G+244.
	000016
LA23:
	CLR -14.(0)
	CLR %2
	MOV -2.(0),%1
	JSR %7,@G+304.
	000020
	MOV %1,-16.(0)
	MOV -2.(0),%1
	ASL %1
	MOV -16.(0),%2
	ASL %2
	MOV 26.(1),24.(2)
	TST -6.(0)
	BLE LA24
	MOV #000023,%1
	ADD -16.(0),%1
	MOV -6.(0),%2
	INC %2
	MOV %2,%3
	SXT %2
	DIV #000002,%2
	MOV %2,%3
	MOV -4.(0),%2
	JSR %7,@G+200.
	000022
LA24:
	MOV -6.(0),%1
	ADD #000026,%1
	MOV %1,%3
	MOV -10.(0),%2
	MOV -16.(0),%1
	JSR %7,@G+314.
	000022
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	MOV -2.(0),%2
	ASL %2
	MOV 34.(2),%2
	JSR %7,@G+244.
	000022
LA25:
LA26:
	JSR %7,@G+254.
	000022
	MOV -2.(0),%1
	ASL %1
	TST 22.(1)
	BNE LA27
	CMP #177777,-8.(0)
	BEQ LA28
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000006,%1
	JSR %7,@G+246.
	000022
	TST %1
	BNE LA27
LA28:
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	JSR %7,@G+246.
	000022
	TST %1
	BEQ LA26
LA27:
	CMP #177777,-8.(0)
	BEQ LA29
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000006,%1
	JSR %7,@G+246.
	000022
	TST %1
	BEQ LA29
	MOV #177777,%1
	BR LA22
LA29:
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	JSR %7,@G+246.
	000022
	TST %1
	BEQ LA30
	MOV -2.(0),%1
	JSR %7,@LA9
	000022
	BR LA31
LA30:
	MOV -2.(0),%1
	ADD #000013,%1
	JSR %7,@G+232.
	000022
	MOV %1,-16.(0)
	TST -16.(0)
	BNE LA32
	BR LA31
LA32:
	MOV -2.(0),%1
	ADD #000011,%1
	MOV -16.(0),%2
	ADD #000021,%2
	MOV #000002,%3
	JSR %7,@G+360.
	000022
	TST %1
	BNE LA33
	MOV -16.(0),%1
	JSR %7,@G+306.
	000022
	BR LA25
LA33:
	MOV -2.(0),%1
	JSR %7,@LA9
	000022
	BR LA34
LA36:
	MOV -16.(0),%1
	ASL %1
	MOV -2.(0),%2
	ASL %2
	CMP 24.(1),26.(2)
	BNE LA37
	MOV -16.(0),%1
	JSR %7,@G+306.
	000022
	MOV -6.(0),%1
	BR LA22
LA37:
	MOV -16.(0),%1
	ASL %1
	MOV -2.(0),%2
	ASL %2
	CMP 24.(1),26.(2)
	BLE LA38
	MOV #LA999,%1
	CLC 
	ROR %1
	MOV -16.(0),%4
	MOV %1,%3
	MOV #000004,%2
	MOV -2.(0),%1
	JSR %7,@G+434.
	000022
	MOV -16.(0),%1
	JSR %7,@G+306.
	000022
	MOV #177775,%1
	BR LA22
LA22:
	JMP MA22
LA38:
	MOV -16.(0),%1
	JSR %7,@G+306.
	000022
	BR LA35
LA31:
	JMP MA31
LA39:
	MOV -2.(0),%1
	ASL %1
	TST 28.(1)
	BEQ LA40
	MOV -2.(0),%1
	ASL %1
	MOV 28.(1),%1
	JSR %7,@G+306.
	000022
LA40:
	MOV -2.(0),%1
	ASL %1
	MOV -16.(0),28.(1)
	MOV #177776,%1
	BR LA22
LA41:
	MOV -16.(0),%1
	JSR %7,@G+306.
	000022
	BR LA35
LA34:
	MOV -16.(0),%1
	ASL %1
	MOV 20.(1),%1
	BIC #177400,%1
	CMP %1,#000031
	BEQ LA36
	CMP %1,#000033
	BEQ LA39
	BR LA41
LA35:
	JMP LA25
MA31:
	JMP LA23
MA22:
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO AGETIMEOUT
LA8:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	CLR -4.(0)
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000002,%1
	CLR %2
	JSR %7,@G+244.
	000006
	MOV -2.(0),%1
	ASL %1
	MOV -4.(0),%2
	SUB 36.(1),%2
	ASH #000003,%2
	ADD #000004,%2
	MOV %2,-4.(0)
	MOV -2.(0),%1
	ASL %1
	MOV 34.(1),%1
	MUL #000007,%1
	MOV %1,-6.(0)
	MOV -4.(0),%2
	MOV #000144,%1
	JSR %7,@G+364.
	000016
	MOV %1,%2
	MOV #000001,%1
	JSR %7,@G+362.
	000010
	MOV -6.(0),%2
	ADD %1,%2
	CLC 
	ROR %2
	ASH #177776,%2
	MOV -2.(0),%1
	ASL %1
	MOV %2,34.(1)
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO RECEIVEEFTPBLOCK
LA10:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
LA43:
	CLR -8.(0)
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000004,%1
	MOV %1,%3
	MOV -6.(0),%2
	MOV -2.(0),%1
	JSR %7,@G+436.
	000012
	MOV %1,-10.(0)
	TST -10.(0)
	BLE LA44
	MOV #000023,%1
	ADD -8.(0),%1
	MOV -10.(0),%2
	INC %2
	CLC 
	ROR %2
	MOV %2,%3
	MOV %1,%2
	MOV -4.(0),%1
	JSR %7,@G+200.
	000014
	TST -8.(0)
	BEQ LA45
	MOV -8.(0),%1
	JSR %7,@G+306.
	000014
	TST -10.(0)
	BNE LA46
	BR LA43
LA46:
LA45:
	MOV -10.(0),%1
	BR LA42
LA44:
	CMP #177773,-10.(0)
	BEQ LA47
	MOV -10.(0),%1
	BR LA42
LA47:
	BR LA43
LA42:
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO RECEIVEEFTPPACKET
LA11:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
	CLR -8.(0)
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000004,%1
	MOV -4.(0),%2
	JSR %7,@G+244.
	000012
LA49:
	CLR -10.(0)
	CLR -12.(0)
LA50:
	JSR %7,@G+254.
	000016
	MOV -2.(0),%1
	ASL %1
	TST 22.(1)
	BNE LA51
	CMP #177777,-4.(0)
	BEQ LA50
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000004,%1
	JSR %7,@G+246.
	000016
	TST %1
	BEQ LA50
LA51:
	CMP #177777,-4.(0)
	BEQ LA52
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000004,%1
	JSR %7,@G+246.
	000016
	TST %1
	BEQ LA52
	MOV #177777,%1
	BR LA48
LA52:
	MOV -2.(0),%1
	ADD #000013,%1
	JSR %7,@G+232.
	000016
	MOV %1,-10.(0)
	TST -10.(0)
	BNE LA53
	MOV #LA998,%1
	CLC 
	ROR %1
	JSR %7,@G+210.
	000016
LA53:
	MOV -10.(0),%1
	ASL %1
	MOV 24.(1),-12.(0)
	MOV -2.(0),%1
	ASL %1
	TST 32.(1)
	BEQ LA54
	MOV -2.(0),%1
	ASL %1
	MOV 16.(1),%1
	BIC #177400,%1
	CLR %2
	TST %1
	BNE .+4.
	COM %2
	MOV -2.(0),%1
	ASL %1
	MOV -10.(0),%3
	ASL %3
	CLR %4
	CMP 16.(1),32.(3)
	BNE .+4.
	COM %4
	BIS %4,%2
	MOV -10.(0),%1
	ASL %1
	MOV 20.(1),%1
	BIC #177400,%1
	CLR %3
	CMP %1,#000030
	BNE .+4.
	COM %3
	COM %3
	BIC %3,%2
	MOV %2,-14.(0)
	TST -14.(0)
	BEQ LA55
	TST -12.(0)
	BNE LA55
	MOV -2.(0),%1
	ASL %1
	CLR 32.(1)
	MOV -2.(0),%1
	ASL %1
	CLR 26.(1)
	MOV -2.(0),%1
	ADD #000010,%1
	MOV -10.(0),%2
	ADD #000020,%2
	MOV #000003,%3
	JSR %7,@G+200.
	000020
	BR LA56
LA48:
	JMP MA48
LA55:
	TST -14.(0)
	BEQ LA57
	MOV #LA997,%1
	CLC 
	ROR %1
	MOV -10.(0),%4
	MOV %1,%3
	MOV #000004,%2
	MOV -2.(0),%1
	JSR %7,@G+434.
	000020
LA57:
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	TST -14.(0)
	BEQ LA58
	MOV #177773,%1
	BR LA48
LA54:
	JMP MA54
LA58:
	JMP LA49
LA59:
LA56:
MA54:
	MOV -2.(0),%1
	ADD #000011,%1
	MOV -10.(0),%2
	ADD #000021,%2
	MOV #000002,%3
	JSR %7,@G+360.
	000016
	TST %1
	BNE LA60
	MOV -10.(0),%1
	ASL %1
	MOV 20.(1),%1
	BIC #177400,%1
	CMP %1,#000030
	BNE LA61
	TST -12.(0)
	BNE LA61
	MOV #LA996,%1
	CLC 
	ROR %1
	MOV -10.(0),%4
	MOV %1,%3
	MOV #000003,%2
	MOV -2.(0),%1
	JSR %7,@G+434.
	000016
	MOV -2.(0),%1
	ASL %1
	MOV #177777,30.(1)
LA61:
	MOV -10.(0),%1
	JSR %7,@G+306.
	000016
	JMP LA49
LA60:
	TST -12.(0)
	BNE LA62
	MOV -2.(0),%1
	ASL %1
	CMP 26.(1),#000001
	BLE LA62
	MOV -10.(0),%1
	JSR %7,@G+306.
	000016
	MOV #177774,%1
	BR LA48
LA62:
	MOV -2.(0),%1
	ASL %1
	MOV 26.(1),%1
	SUB -12.(0),%1
	CLC 
	ROR %1
	TST %1
	BEQ LA63
	MOV #LA995,%1
	CLC 
	ROR %1
	MOV -10.(0),%4
	MOV %1,%3
	MOV #000004,%2
	MOV -2.(0),%1
	JSR %7,@G+434.
	000016
	MOV -10.(0),%1
	JSR %7,@G+306.
	000016
	MOV #177775,%1
	JMP LA48
LA63:
	BR LA64
LA66:
	CLR -14.(0)
	MOV -10.(0),%2
	MOV -2.(0),%1
	JSR %7,@LA13
	000020
	MOV -2.(0),%1
	ASL %1
	CMP 26.(1),-12.(0)
	BEQ LA67
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	JMP LA49
LA67:
	MOV -2.(0),%1
	ASL %1
	MOV 26.(1),%1
	INC %1
	MOV -2.(0),%2
	ASL %2
	MOV %1,26.(2)
	MOV -10.(0),%1
	ASL %1
	MOV 18.(1),%1
	SUB #000026,%1
	MOV %1,-14.(0)
	MOV -6.(0),%1
	ASL %1
	MOV -10.(0),(1)
	MOV -14.(0),%1
	JMP LA48
LA68:
	CLR -14.(0)
	MOV -10.(0),%2
	MOV -2.(0),%1
	JSR %7,@LA13
	000020
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	MOV -2.(0),%1
	ASL %1
	CMP 26.(1),-12.(0)
	BEQ LA69
	JMP LA49
LA69:
	MOV -2.(0),%1
	ASL %1
	MOV 26.(1),%1
	INC %1
	MOV -2.(0),%2
	ASL %2
	MOV %1,26.(2)
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	MOV #000062,%2
	JSR %7,@G+244.
	000020
LA70:
LA71:
	JSR %7,@G+254.
	000020
	MOV -2.(0),%1
	ASL %1
	TST 22.(1)
	BNE LA72
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	JSR %7,@G+246.
	000020
	TST %1
	BEQ LA71
LA72:
	MOV %0,%1
	CLC 
	ROR %1
	SUB #000007,%1
	BR	LA994
LA64:
	JMP MA64
LA994:
	JSR %7,@G+246.
	000020
	TST %1
	BEQ LA73
	CLR %1
	JMP LA48
LA73:
	MOV -2.(0),%1
	ADD #000013,%1
	JSR %7,@G+232.
	000020
	MOV %1,-10.(0)
	TST -10.(0)
	BNE LA74
	MOV #LA993,%1
	CLC 
	ROR %1
	JSR %7,@G+210.
	000020
LA74:
	MOV -10.(0),%1
	ASL %1
	MOV 20.(1),%1
	BIC #177400,%1
	CMP %1,#000032
	BEQ LA75
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	BR LA70
LA75:
	MOV -2.(0),%1
	ASL %1
	MOV -10.(0),%2
	ASL %2
	CMP 26.(1),24.(2)
	BNE LA76
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	CLR %1
	JMP LA48
LA76:
	MOV -10.(0),%2
	MOV -2.(0),%1
	JSR %7,@LA13
	000020
	MOV -10.(0),%1
	JSR %7,@G+306.
	000020
	BR LA70
LA77:
	MOV -2.(0),%1
	ASL %1
	TST 28.(1)
	BEQ LA78
	MOV -2.(0),%1
	ASL %1
	MOV 28.(1),%1
	JSR %7,@G+306.
	000016
LA78:
	MOV -2.(0),%1
	ASL %1
	MOV -10.(0),28.(1)
	MOV #177776,%1
	JMP LA48
MA64:
	MOV -10.(0),%1
	ASL %1
	MOV 20.(1),%1
	BIC #177400,%1
	CMP %1,#000030
	BNE LA992
	JMP LA66
LA992:
	CMP %1,#000032
	BNE LA991
	JMP LA68
LA991:
	CMP %1,#000033
	BEQ LA77
	BR LA65
LA65:
	MOV -10.(0),%1
	JSR %7,@G+306.
	000016
	JMP LA49
MA48:
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO ACKEFTPPACKET
LA12:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	CLR %2
	MOV -2.(0),%1
	JSR %7,@G+304.
	000006
	MOV %1,-6.(0)
	MOV -4.(0),%1
	ASL %1
	MOV -6.(0),%2
	ASL %2
	MOV 24.(1),24.(2)
	CLR %1
	ADD #000026,%1
	MOV %1,%3
	MOV #000031,%2
	MOV -6.(0),%1
	JSR %7,@G+314.
	000010
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO GETEFTPABORT
LA14:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV -2.(0),%1
	ASL %1
	MOV 28.(1),%1
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5


; ENTRY POINT TO SENDEFTPABORT
LA15:
	SUB @(6),%0
	MOV %7,@%0
	MOV (6)+,-(0)
	MOV %0,%5
	MOV %1,-(5)
	MOV %2,-(5)
	MOV %3,-(5)
	MOV %4,-(5)
	CLR %2
	MOV -2.(0),%1
	JSR %7,@G+304.
	000012
	MOV %1,-10.(0)
	TST -8.(0)
	BEQ LA79
	MOV -8.(0),%1
	ASL %1
	MOV -10.(0),%2
	ASL %2
	MOV 24.(1),24.(2)
	MOV -8.(0),%1
	ADD #000020,%1
	MOV %1,%2
	MOV -10.(0),%1
	JSR %7,@G+310.
	000014
LA79:
	MOV -2.(0),%1
	ASL %1
	MOV -10.(0),%2
	ASL %2
	MOV 26.(1),24.(2)
	MOV #000023,%1
	ADD -10.(0),%1
	ASL %1
	MOV -4.(0),(1)
	MOV -6.(0),%3
	MOV #000003,%2
	MOV -10.(0),%1
	JSR %7,@G+308.
	000014
	CLR %3
	MOV #000033,%2
	MOV -10.(0),%1
	JSR %7,@G+314.
	000014
	MOV (0)+,%5
	ADD (5)+,%0
	JMP @%5

MA16:

.CSECT GLOBAL

	.=G+420.
	LA1
	.=G+422.
	LA2
	.=G+424.
	LA3
	.=G+426.
	LA4
	.=G+430.
	LA5
	.=G+428.
	LA10
	.=G+436.
	LA11
	.=G+432.
	LA14
	.=G+434.
	LA15

.CSECT

LA7:
	LA6
LA9:
	LA8
LA13:
	LA12
LA999:
	054446
	052517
	020122
	042522
	042503
	053111
	051105
	044040
	051501
	043440
	052117
	042524
	020116
	052517
	020124
	043117
	051440
	047131
	044103
	000056
LA998:
	055422
	043105
	050124
	020135
	020055
	050511
	042440
	050115
	054524
	000056
LA997:
	054451
	052517
	020122
	042523
	042116
	051105
	044040
	051501
	043440
	052117
	042524
	020116
	051450
	041511
	020051
	052517
	020124
	043117
	051440
	047131
	044103
LA996:
	051046
	041505
	044505
	042526
	020122
	052502
	054523
	020054
	046120
	040505
	042523
	052040
	054522
	040440
	040507
	047111
	046040
	052101
	051105
	000056
LA995:
	054443
	052517
	020122
	042523
	042116
	051105
	044040
	051501
	043440
	052117
	042524
	020116
	052517
	020124
	043117
	051440
	047131
	044103
LA993:
	055422
	043105
	050124
	020135
	020055
	050511
	042440
	050115
	054524
	000056


.END
